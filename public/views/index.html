<section data-ng-controller="S3ObjectsController"  data-ng-init="find()">

		<div class="container" id="wrapper" class="ng-cloak">
			<h1>get product</h1>

				<div id="container-fluid">

					<div class="row-fluid page-header">
						  <div class="span12">
								<p class="lead">filter or sort to find your product, then click on it to see all available information.</p>
						  </div>

            <div>

              <div class="span6">
              <label>Filter: </label>
              <input ng-model="query" style="width: 100%;">
              </div>
              <div class="span6">
              <label>Sort by:</label>
              <select ng-model="orderProp">
                <option value="-mtime">date</option>
                <option value="name">name</option>
                <option value="-size">size</option>
              </select>
              </div>

            </div>

					</div>

					<div class="row-fluid">

						<div class="span12">

							<table class="table table-hover">
							<thead>
								<tr>
								<td>file</td>
								<td>size</td>
                </tr>
							</thead>
							<tbody>
								<tr ng-repeat="product in s3objects | filter:query | orderBy:orderProp">
									<td ng-cloak><a class="filelink" href="" ng-click="openModal(product)">{{product.uri}}</a></td>
									<td ng-cloak>{{product.sizeFriendly}}</td>
								</tr>
							</tbody>
							</table>

						</div>

					</div>


        <script type="text/ng-template" id="myModalContent.html">
				<div close="close()" options="opts">
					<div class="modal-header">
						<h4>product detail</h4>
					</div>

					<div class="modal-body">
							<table class="table table-hover" id="modaltable">
							<tbody>
								<tr><td>filename</td><td>{{ detail.name }}</td></tr>
								<tr><td>uri</td><td>{{ detail.uri }}</td></tr>
								<tr><td>last modified</td><td>{{ detail.mtime | date:'yyyy/MM/dd HH:mm:ss Z' }}</td></tr>
								<tr><td>md5 checksum</td><td>{{ detail.md5sum }}</td></tr>
								<tr><td>size</td><td>{{ detail.sizeFriendly }}</td></tr>
								<tr><td>bucket</td><td>{{ detail.bucket.name }}</td></tr>
							</tbody>
							</table>
					</div>
					<div class="modal-footer">
						<a class="pull-left" id="buttonhref" href="/objects/{{ detail._id }}/{{ detail.bucket._id }}">download</a>
						<button ng-click="cancel()" class="btn-primary">done</button>
					</div>
				</div>
				</script>

    </div>
  </div>



</section>
